<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Loading…</title>
    <meta name="robots" content="noindex" />
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; color: #334; }
    </style>
    <script>
      (function () {
        var l = window.location;

        // Detect the repo base from the first path segment: /<repo>/...
        var segments = l.pathname.replace(/^\/+/, '').split('/');
        var repo = segments[0] || 'reachright-marketing'; // fallback to your repo name
        var base = '/' + repo + '/';

        // Preserve the original clean URL (path + query + hash)
        var originalUrl = base + segments.slice(1).join('/') + l.search + l.hash;

        // 1) Switch the URL bar back to the original clean route (no ?), so the app router sees it.
        try { history.replaceState(null, '', originalUrl); } catch (_) {}

        // 2) Fetch the real index.html and swap it in (no query hacks).
        fetch(base + 'index.html', { cache: 'no-store' })
          .then(function (r) { return r.text(); })
          .then(function (html) {
            // Write the actual app HTML so all assets load correctly
            document.open();
            document.write(html);
            document.close();

            // 3) Ensure the final URL stays clean after the app boots.
            try { history.replaceState(null, '', originalUrl); } catch (_) {}
          })
          .catch(function () {
            // If anything fails, at least land on the site root.
            l.replace(base);
          });
      })();
    </script>
  </head>
  <body>
    Loading…
  </body>
</html>
